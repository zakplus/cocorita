[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "src/cocorita.js",
    "content": "import EventEmitter from 'events';\nimport yaml from 'js-yaml';\nimport some from 'lodash.some';\nimport every from 'lodash.every';\nimport cloneDeep from 'lodash.clonedeep';\n\n// Events constants\n\n/**\n * Event emitted every time a translation is not found for any\n * of the languages passed in the initialize array.\n *\n * @typedef {string} EVT_INIT_KEY\n * @example\n * coco.on(Cocorita.EVT_INIT_KEY, ({cocorita, data, source, targets}) => {\n *   // cocorita {Cocorita} : Cocorita instance emitting the event\n *   // data {Object}       : The translations data object\n *   // source {String}     : The source text\n *   // targets {Object}    : The target languages translations object\n * });\n */\nconst EVT_INIT_KEY = 'init-key';\n\n/**\n * Regular expression validating tr replace keys\n * @type {RegExp}\n */\nconst REPLACE_KEY_REGEXP = /^[a-zA-Z0-9_]+$/;\n\n/**\n * Check if data is a valid translations object\n * @param {Object} data A translations object\n * @return {Boolean} Return true if data is a valid translations object\n */\nfunction isValidTranslationsObject(data) {\n  if (typeof data !== 'object') return false;\n  return every(data, (source) => {\n    if (typeof source !== 'object') return false;\n    return every(source, translation => typeof translation === 'string');\n  });\n}\n\n// Polyfill for Array.isArray\nif (!Array.isArray) {\n  Array.isArray = function isArray(arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\n/**\n * Cocorita class\n */\nclass Cocorita extends EventEmitter {\n  /**\n   * Constructor\n   *\n   * @param {Object} options Options object\n   * @param {String} [options.language] The target language identifier\n   * @param {String[]} [options.initialize] Array of languages whose translations\n   * will be initialized with the source text if not present\n   * @return {Cocorita} A new Cocorita instance\n   * @throws {Error} Throws a Error if something gone wrong\n   */\n  constructor(options) {\n    super();\n\n    /**\n     * Target language\n     * @type {String}\n     */\n    this.lang = '';\n\n    /**\n     * Translations object\n     * @type {Object}\n     */\n    this.data = {};\n\n    // Options check\n    if (options !== undefined) {\n      if (options.language !== undefined) {\n        if (typeof options.language !== 'string') throw new Error('options.language must be a string');\n        this.language = options.language;\n      }\n\n      // Initialize target languages\n      if (options.initialize !== undefined) {\n        if (!(Array.isArray(options.initialize) && every(options.initialize, value => typeof value === 'string'))) {\n          throw new Error('options.initialize must be a string array');\n        }\n\n        /**\n         * Array of target languages to be initialized if a translation is missing\n         * @type {String[]}\n         */\n        this.initialize = options.initialize;\n      }\n\n      // Default target text for tr if missing translation\n      if (options.defaultTarget) {\n        if (some(['source', 'blank'], def => def === options.defaultTarget)) {\n          /**\n           * Normally, when a target language translation is found missing,\n           * an empty string is emitted.\n           * If defaultTarget value is set to 'source', the source text is emitted instead.\n           */\n          this.defaultTarget = options.defaultTarget;\n        } else {\n          throw new Error('Invalid defaultTarget option');\n        }\n      }\n    }\n  }\n\n  /**\n   * Set target language id\n   * @type {String}\n   */\n  set language(lang) {\n    if (lang === undefined || typeof lang !== 'string') throw new Error('language must be a string');\n    this.lang = lang;\n  }\n\n  /**\n   * get target language id\n   * @type {String}\n   */\n  get language() {\n    return this.lang;\n  }\n\n  /**\n   * Load translations data from a database file\n   * or a translations object\n   *\n   * @param {String|Object} source A json or yaml string or a valid translations object\n   * @param {String} [format] 'json' or 'yaml'. Required only if source is a file path.\n   * @throws {Error}\n   */\n  load(source, format) {\n    if (source === undefined) throw new Error('source parameter is required');\n\n    if (typeof source === 'object') {\n      const data = cloneDeep(source);\n      if (isValidTranslationsObject(data)) {\n        this.data = data;\n        return;\n      }\n      throw new Error('invalid translations object');\n    }\n\n    if (typeof source === 'string') {\n      if (format === undefined) throw new Error('format parameter is required if source is a string');\n      if (typeof format !== 'string') throw new Error('format parameter must be a string');\n\n      if (format === 'json') {\n        try {\n          const data = JSON.parse(source);\n          if (!isValidTranslationsObject(data)) throw new Error('invalid source');\n          this.data = data;\n          return;\n        } catch (e) {\n          throw new Error('invalid source');\n        }\n      }\n\n      if (format === 'yaml') {\n        try {\n          const data = yaml.safeLoad(source);\n          if (!isValidTranslationsObject(data)) throw new Error('invalid source');\n          this.data = data;\n          return;\n        } catch (e) {\n          throw new Error('invalid source');\n        }\n      }\n\n      throw new Error('unsupported format');\n    }\n\n    throw new Error('source parameter must be a valid translations object or a file path');\n  }\n\n  /**\n   * Get a copy of translations data object\n   * @return {Object} Translations data object\n   */\n  getData() {\n    return cloneDeep(this.data);\n  }\n\n  /**\n   * Get translations data serialized to json or yaml format\n   *\n   * @param {String} format 'json' or 'yaml'\n   * @throws {Error}\n   * @return {String} Serialized translations data\n   */\n  dump(format) {\n    if (format === undefined) throw new Error('format parameter is required');\n    if (typeof format !== 'string') throw new Error('format parameter must be a string');\n\n    if (format === 'json') {\n      const sortedData = {};\n      Object.keys(this.data).sort().forEach((key) => {\n        sortedData[key] = this.data[key];\n      });\n      return JSON.stringify(sortedData, null, 2);\n    }\n\n    if (format === 'yaml') {\n      return yaml.safeDump(this.data, { sortKeys: true });\n    }\n\n    throw new Error('unsupported format');\n  }\n\n  /**\n   * Translate a string of source text in the target language.<br/>\n   * If the translation is not available in the database the method return a blank string.<br/>\n   * If the initialize option was passed to the constructor, then this method will check all the\n   * target languages translations for the source text and will initialize them with a blank string\n   * were are not available.\n   *\n   * @param {String} source The source text\n   * @param {Object} replaces Replaces map object\n   * @return {String} Translated text in current target language\n   * @emits {EVT_INIT_KEY} Emitted if target translation does not exists in data base\n   * @throws {Error}\n   */\n  tr(source, replaces) {\n    if (source === undefined) return '';\n    if (typeof source !== 'string') throw new Error('source parameter must be a string');\n\n    // Check options object\n    const replacesRe = [];\n    if (replaces !== undefined) {\n      if (typeof replaces !== 'object') throw new Error('replaces parameter must be a map');\n      Object.keys(replaces).forEach((key) => {\n        const value = replaces[key];\n        const strval = `${value}`;\n        if (typeof key !== 'string' || !key.match(REPLACE_KEY_REGEXP)) throw new Error(`replace parameter key not matching regular expression ${REPLACE_KEY_REGEXP}`);\n        replacesRe.push({\n          re: new RegExp(`\\\\{\\\\{ *${key} *\\\\}\\\\}`, 'g'),\n          val: strval,\n        });\n      });\n    }\n\n    // If targets object does not exists then initialize it\n    if (this.data[source] === undefined) {\n      this.data[source] = {};\n    }\n\n    // If initialization is required then initialize target languages\n    // if a translation is not available for them\n    if (this.initialize !== undefined) {\n      let initKey = false;\n      this.initialize.forEach((targetLang) => {\n        if (this.data[source][targetLang] === undefined) {\n          this.data[source][targetLang] = source;\n          initKey = true;\n        }\n      });\n      if (initKey) {\n        this.emit(EVT_INIT_KEY, this, this.data, source, this.data[source]);\n      }\n    }\n\n    // If a translation is available for target language then return it\n    if (this.data[source][this.lang] !== undefined) {\n      let target = this.data[source][this.lang];\n\n      // Apply replaces\n      if (replacesRe.length > 0) {\n        replacesRe.forEach((replace) => {\n          target = target.replace(replace.re, replace.val);\n        });\n      }\n\n      return target;\n    }\n\n    // If no translation available then return a default value\n    if (this.defaultTarget === 'source') return source;\n    return '';\n  }\n}\n\nCocorita.EVT_INIT_KEY = EVT_INIT_KEY;\n\nexport default Cocorita;\nexport { Cocorita };\n",
    "static": true,
    "longname": "/home/zakplus/sviluppo/javascript/cocorita/src/cocorita.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "typedef",
    "name": "EVT_INIT_KEY",
    "memberof": "src/cocorita.js",
    "static": true,
    "longname": "src/cocorita.js~EVT_INIT_KEY",
    "access": "public",
    "description": "Event emitted every time a translation is not found for any\nof the languages passed in the initialize array.",
    "examples": [
      "coco.on(Cocorita.EVT_INIT_KEY, ({cocorita, data, source, targets}) => {\n  // cocorita {Cocorita} : Cocorita instance emitting the event\n  // data {Object}       : The translations data object\n  // source {String}     : The source text\n  // targets {Object}    : The target languages translations object\n});"
    ],
    "lineNumber": 22,
    "type": {
      "types": [
        "string"
      ],
      "optional": false,
      "name": "EVT_INIT_KEY"
    }
  },
  {
    "__docId__": 50,
    "kind": "variable",
    "name": "REPLACE_KEY_REGEXP",
    "memberof": "src/cocorita.js",
    "static": true,
    "longname": "src/cocorita.js~REPLACE_KEY_REGEXP",
    "access": "public",
    "export": false,
    "importPath": "cocorita/src/cocorita.js",
    "importStyle": null,
    "description": "Regular expression validating tr replace keys",
    "lineNumber": 28,
    "type": {
      "nullable": null,
      "types": [
        "RegExp"
      ],
      "spread": false,
      "description": null
    },
    "ignore": true
  },
  {
    "__docId__": 51,
    "kind": "function",
    "name": "isValidTranslationsObject",
    "memberof": "src/cocorita.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/cocorita.js~isValidTranslationsObject",
    "access": "public",
    "export": false,
    "importPath": "cocorita/src/cocorita.js",
    "importStyle": null,
    "description": "Check if data is a valid translations object",
    "lineNumber": 35,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "data",
        "description": "A translations object"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": "Return true if data is a valid translations object"
    },
    "ignore": true
  },
  {
    "__docId__": 52,
    "kind": "class",
    "name": "Cocorita",
    "memberof": "src/cocorita.js",
    "static": true,
    "longname": "src/cocorita.js~Cocorita",
    "access": "public",
    "export": true,
    "importPath": "cocorita/src/cocorita.js",
    "importStyle": "Cocorita",
    "description": "Cocorita class",
    "lineNumber": 53,
    "interface": false,
    "extends": [
      "events~EventEmitter"
    ]
  },
  {
    "__docId__": 53,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#constructor",
    "access": "public",
    "description": "Constructor",
    "lineNumber": 64,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options object"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "options.language",
        "description": "The target language identifier"
      },
      {
        "nullable": null,
        "types": [
          "String[]"
        ],
        "spread": false,
        "optional": true,
        "name": "options.initialize",
        "description": "Array of languages whose translations\nwill be initialized with the source text if not present"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Cocorita"
      ],
      "spread": false,
      "description": "A new Cocorita instance"
    },
    "throws": [
      {
        "types": [
          "Error"
        ],
        "description": "Throws a Error if something gone wrong"
      }
    ]
  },
  {
    "__docId__": 54,
    "kind": "member",
    "name": "lang",
    "memberof": "src/cocorita.js~Cocorita",
    "static": false,
    "longname": "src/cocorita.js~Cocorita#lang",
    "access": "public",
    "description": "Target language",
    "lineNumber": 71,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 55,
    "kind": "member",
    "name": "data",
    "memberof": "src/cocorita.js~Cocorita",
    "static": false,
    "longname": "src/cocorita.js~Cocorita#data",
    "access": "public",
    "description": "Translations object",
    "lineNumber": 77,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 57,
    "kind": "member",
    "name": "initialize",
    "memberof": "src/cocorita.js~Cocorita",
    "static": false,
    "longname": "src/cocorita.js~Cocorita#initialize",
    "access": "public",
    "description": "Array of target languages to be initialized if a translation is missing",
    "lineNumber": 96,
    "type": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 58,
    "kind": "member",
    "name": "defaultTarget",
    "memberof": "src/cocorita.js~Cocorita",
    "static": false,
    "longname": "src/cocorita.js~Cocorita#defaultTarget",
    "access": "public",
    "description": "Normally, when a target language translation is found missing,\nan empty string is emitted.\nIf defaultTarget value is set to 'source', the source text is emitted instead.",
    "lineNumber": 107,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 59,
    "kind": "set",
    "name": "language",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#language",
    "access": "public",
    "description": "Set target language id",
    "lineNumber": 119,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 61,
    "kind": "get",
    "name": "language",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#language",
    "access": "public",
    "description": "get target language id",
    "lineNumber": 128,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 62,
    "kind": "method",
    "name": "load",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#load",
    "access": "public",
    "description": "Load translations data from a database file\nor a translations object",
    "lineNumber": 140,
    "params": [
      {
        "nullable": null,
        "types": [
          "String",
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": "A json or yaml string or a valid translations object"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "format",
        "description": "'json' or 'yaml'. Required only if source is a file path."
      }
    ],
    "throws": [
      {
        "types": [
          "Error"
        ],
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 66,
    "kind": "method",
    "name": "getData",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#getData",
    "access": "public",
    "description": "Get a copy of translations data object",
    "lineNumber": 188,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Translations data object"
    },
    "params": []
  },
  {
    "__docId__": 67,
    "kind": "method",
    "name": "dump",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#dump",
    "access": "public",
    "description": "Get translations data serialized to json or yaml format",
    "lineNumber": 199,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "format",
        "description": "'json' or 'yaml'"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "Serialized translations data"
    },
    "throws": [
      {
        "types": [
          "Error"
        ],
        "description": ""
      }
    ]
  },
  {
    "__docId__": 68,
    "kind": "method",
    "name": "tr",
    "memberof": "src/cocorita.js~Cocorita",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/cocorita.js~Cocorita#tr",
    "access": "public",
    "description": "Translate a string of source text in the target language.<br/>\nIf the translation is not available in the database the method return a blank string.<br/>\nIf the initialize option was passed to the constructor, then this method will check all the\ntarget languages translations for the source text and will initialize them with a blank string\nwere are not available.",
    "lineNumber": 231,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": "The source text"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "replaces",
        "description": "Replaces map object"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "Translated text in current target language"
    },
    "throws": [
      {
        "types": [
          "Error"
        ],
        "description": ""
      }
    ],
    "emits": [
      {
        "types": [
          "EVT_INIT_KEY"
        ],
        "description": "Emitted if target translation does not exists in data base"
      }
    ]
  },
  {
    "kind": "index",
    "content": "# Cocorita language translation library\n\n## Install\n```npm install --save cocorita```\n\n## Motivation\nThere are many great localization tools out there, if you need a fully customizable popular/standard solution then you should go for them.  \nIf you just need translation then Cocorita can fit your needs, it's small and functional. Give it a try!\n\n## Migration from 1.x.x version\nStarting from version 2.0.0 Cocorita adopted a fully ES6 module structure.  \nThis implies you have to change your code **only if you are using cocorita in a CommonJS module** (with require) or in a browser.  \nNo actions required if you are using cocorita in a ES6 module.\n\nIf you are using cocorita in a CommonJS module:\n```Javascript\n// Change this\nconst Cocorita = require('cocorita');\n\n// To this (using object destructuring)\nconst { Cocorita } = require('cocorita');\n\n// Or this\nconst Cocorita = require('cocorita').Cocorita;\n```\n\nIf you are using cocorita in a browser you have to load the script from the \"dist\" folder.  \nThe script expose the library with the global property \"CocoLib\". Here is an example:\n```html\n<script type=\"text/javascript\" src=\"<path to>/dist/cocorita.js\"></script>\n\n<script type=\"text/javascript\">\n  // Change this\n  const coco = new Cocorita(options);\n\n  // To this (using object destructuring)\n  const coco = new CocoLib.Cocorita(options);\n</script>\n```\n\n## Usage\nAPI documentation is [here](https://zakplus.github.io/cocorita/).\n\n### Quick start (NodeJS)\n\n```javascript\nconst { Cocorita } = require('cocorita');\n\n// Initialize and set target language to 'es'\nconst coco = new Cocorita({ language: 'es' });\n\n// Load a YAML translations database from file\ncoco.load(fs.readFileSync('translations.yaml', { encoding: 'utf8' }), 'yaml'));\n\n// Use\nconsole.log( coco.tr('Hello Cocorita!') ); // Hola Cocorita!\n```\n\n### Quick start (Browser)\n\nExample with database as a object in a script file:\n\ndatabase.js:\n```javascript\nvar translations = {\n  hello: {\n    en: 'hello',\n    es: 'hola',\n    it: 'ciao'\n  },\n  world: {\n    en: 'world',\n    es: 'mundo',\n    it: 'mondo'\n  }\n}\n```\n\nhtml:\n```html\n<script type=\"text/javascript\" src=\"<path to>/dist/cocorita.js\"></script>\n\n<!-- include database -->\n<script type=\"text/javascript\" src=\"database.js\"></script>\n\n<script type=\"text/javascript\">\n  (function() {\n    // Initialize\n    var coco = new CocoLib.Cocorita({ language: 'es' });\n\n    // Load translations database\n    coco.load(translations);\n\n    // Use\n    coco.tr('Hello Cocorita!');\n  }) ();\n</script>\n```\nYou could get the database in any other way. It could be a object, json or yaml:\n\n```html\n<script type=\"text/javascript\" src=\"cocorita.js\"></script>\n\n<script type=\"text/javascript\">\n  (function() {\n    // Initialize\n    var coco = new CocoLib.Cocorita({ language: 'es' });\n\n    // Load translations database\n    asyncLoadTranslations(function(err, data) {\n      if(err) { // handle error }\n      else coco.load(data);\n      ready();\n    });\n\n    function ready() {\n      // Use\n      coco.tr('Hello Cocorita!');\n    }\n  }) ();\n</script>\n```\n\n## Options\nCocorita constructor will accept a options object with these keys:\n\n``` javascript\n{\n  language,   // {String}    The target language identifier\n  initialize  // {String[]}  Array of languages whose translations will be initialized with the source text if not present.\n}\n```\n\n## Replace in translated string\nSometimes you need to translate a text which contains some dynamic sections you want to set at run time.  \nIn these cases, you can format your texts as a template (Cocorita support Mustache style tags) and use the replace object parameter:\n\n```javascript\ncoco.tr('You have {{ msglen }} new messages and {{ reqlen }} new requests!', {\n  msglen: messages.length,\n  reqlen: requests.length\n});\n```\n\ntranslations database (YAML):\n```yaml\nYou have {{ msglen }} new messages and {{ reqlen }} new requests!:\n  it: Hai {{ msglen }} nuovi messaggi e {{ reqlen }} nuove richieste!\n```\n\n## Database initialization\n**THIS FEATURE IS NOT INTENDED TO BE USED IN PRODUCTION ENVIRONMENT**  \nCocorita could initialize missing target translations for you.\nTo do so, you need to pass the 'initialize' languages array in the constructor options parameter:\n\n```javascript\nconst coco = new Cocorita({ initialize:['en', 'es', 'it', 'de'] });\n```\n\nthen, any time the tr() function gets called, it will be checked if a translation is available for every of these languages. If a translation is missing, the source text will be added in place and a Cocorita.EVT_INIT_KEY event will be thrown.  \nYou could listen for the event in order to update the database during development:\n\n```javascript\nconst coco = new Cocorita({ initialize:['en', 'es', 'it', 'de'] });\n\ncoco.on(Cocorita.EVT_INIT_KEY, (co, data, source, targets) => {\n  // In this example we update the wole database\n  fs.writeFileSync('translations.yaml', co.dump('yaml'));\n})\n```\n\n## Error handling\nCocorita will throw errors if anyting unexpexted happen.  \nYou should enclose error-throwing functions calls in try-catch blocks:\n\n```javascript\nlet coco;\ntry {\n  coco = new Cocorita();\n  coco.language = 'en';\n  coco.load(db);\n} catch(e) {\n  // Error handling\n}\n\n// tr() does not throw errors\ncoco.tr();\n```\n\n## Data formats\nCocorita load function will accept a JavaScript object or a YAML or JSON strings with these formats:\n\nJS Object:\n```javascript\n{\n  hello: {\n    de: \"hallo\",\n    en: \"hello\",\n    es: \"hola\",\n    it: \"ciao\"\n  },\n\n  \"hello\\nworld\": {\n    es: \"hola\\nmundo\"\n  }\n}\n```\n\nYAML:\n```yaml\nhello:\n  de: hallo\n  en: hello\n  es: hola\n  it: ciao\n\n\"hello\\nworld\":\n  es: |-\n    hola\n    mundo\n```\n\nJSON:\n```json\n{\n  \"hello\": {\n    \"de\": \"hallo\",\n    \"en\": \"hello\",\n    \"es\": \"hola\",\n    \"it\": \"ciao\"\n  },\n\n  \"hello\\nworld\": {\n    \"es\": \"hola\\nmundo\"\n  }\n}\n```\n\n## license\n\n```\nMIT License\n\nCopyright (c) 2018 Valerio Bianchi\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n```",
    "longname": "/home/zakplus/sviluppo/javascript/cocorita/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"cocorita\",\n  \"version\": \"2.0.1\",\n  \"description\": \"Cocorita Translations Library\",\n  \"main\": \"lib/cocorita.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/zakplus/cocorita.git\"\n  },\n  \"scripts\": {\n    \"pretest\": \"eslint --fix test/**/*.js\",\n    \"test\": \"tape test/**/*.js | tap-spec\",\n    \"docs\": \"rimraf docs && esdoc\",\n    \"linter\": \"eslint --fix src/**/*.js\",\n    \"prebuild\": \"npm run linter\",\n    \"build\": \"npm run build-node && npm run build-browser\",\n    \"build-browser\": \"rimraf dist && webpack --env prod\",\n    \"build-node\": \"rimraf lib && babel ./src/cocorita.js -d lib\",\n    \"postbuild\": \"npm run test && npm run docs\"\n  },\n  \"keywords\": [\n    \"translation\",\n    \"localization\"\n  ],\n  \"author\": {\n    \"name\": \"Valerio Bianchi\",\n    \"email\": \"contacts@valeriobianchi.com\",\n    \"url\": \"https://valeriobianchi.com\"\n  },\n  \"license\": \"MIT\",\n  \"devDependencies\": {\n    \"@babel/cli\": \"7.8.4\",\n    \"@babel/core\": \"7.9.0\",\n    \"@babel/preset-env\": \"7.9.0\",\n    \"babel-loader\": \"8.1.0\",\n    \"esdoc\": \"1.1.0\",\n    \"esdoc-standard-plugin\": \"1.0.0\",\n    \"eslint\": \"6.8.0\",\n    \"eslint-config-airbnb-base\": \"14.1.0\",\n    \"eslint-loader\": \"3.0.3\",\n    \"eslint-plugin-import\": \"2.20.2\",\n    \"rimraf\": \"3.0.2\",\n    \"tap-spec\": \"5.0.0\",\n    \"tape\": \"4.13.2\",\n    \"webpack\": \"4.42.1\",\n    \"webpack-cli\": \"3.3.11\"\n  },\n  \"dependencies\": {\n    \"js-yaml\": \"3.13.1\",\n    \"lodash.clonedeep\": \"4.5.0\",\n    \"lodash.every\": \"4.6.0\",\n    \"lodash.some\": \"4.6.0\"\n  }\n}\n",
    "longname": "/home/zakplus/sviluppo/javascript/cocorita/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  }
]